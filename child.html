<!--
  File: child.html
  Purpose: Creation of the Calendar UI page (whuch includes grid + month/year controls, as well as events sidebar)

  Update Log
  02-14-2026 - 02-15-2026:
    - Created initial Calendar page shell and basic navigation layout
  02-17-2026:
    - Added two column layout (calendar + events sidebar) and placeholder sections
  02-17-2026 - 02-18-2026
    - Added selected date panel + event form + event list containers for calendar.js
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Calendar</title>

    <!--
      This CSP keeps the page locked to local files only
      We allow inline CSS because we keep styles inside this HTML file for simplicity
    -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'"
    />

    <style>
      /* --------- Overall page layout ----------
        Essentially are the spacing and basic font so everything looks consistent */
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }

      /* ---------- Header bar ------------
         This keeps the page title on the left and the close button on the right */
      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 12px;
      }

      .title {
        margin: 0;
      }

      /* ---------- Simple navigation links ---------
         Allpows for a quick way to return to index.html (i.e. the homepage). */
      .links {
        margin-bottom: 14px;
        display: flex;
        gap: 12px;
        align-items: center;
      }

      /* -------- Month/Year controls ------------
         Styles for the previous/next buttons, as well as the dropdowns */
      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
        margin: 10px 0 14px;
      }

      .controls select,
      .controls button {
        padding: 8px 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        background: #fff;
      }

      .controls button {
        cursor: pointer;
      }

      .controls button:hover {
        background: #f3f3f3;
      }

      /* ----------- Two-column layout ------------
         Left side --> calendar grid, right side --> events andnotes sidebar */
      .layout {
        display: grid;
        grid-template-columns: 560px 1fr;
        gap: 18px;
        align-items: start;
      }

      .calendarWrap {
        max-width: 560px;
      }

      /* ---------- Day-of-week header ----------
         7 column row showing days of the week above the calendar */
      .dow {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 8px;
        margin-bottom: 8px;
        font-weight: bold;
        text-align: center;
      }

      /* --------- Calendar grid -----------
         The calendar is a 7 column grid. calendar.js fills it with 42 cells */
      .grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 8px;
      }

      /* -------- Individual day cell ---------
         Each cell is clickable  and highlights on hover */
      .cell {
        border: 1px solid #ddd;
        border-radius: 10px;
        min-height: 64px;
        padding: 8px;
        background: #fff;
        cursor: pointer;
        user-select: none;
        position: relative; /* used so the dot can sit in the top-right */
      }

      .cell:hover {
        background: #fafafa;
      }

      /* -------- Muted cells ---------
         These are padding cells that belong to the previous/next month to keep the grid aligned. */
      .cell.muted {
        background: #f7f7f7;
        color: #888;
        cursor: default;
      }

      /* --------- “Today” highlight ----------
         calendar.js compares each day to the real current date and outlines what today is */
      .cell.today {
        outline: 2px solid #333;
      }

      /* ----------- “Selected” highlight -----------
         When a user clicks a day, calendar.js marks it selected user knows whats being edited (this was really cool to learn). */
      .cell.selected {
        outline: 3px solid #000;
      }

      .dayNumber {
        font-size: 14px;
        font-weight: bold;
      }

      /* --------- Event indicator dot ----------
         If a date has events saved, calendar.js shows a little dot in that day cell */
      .hasEventsDot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #000;
        position: absolute;
        right: 10px;
        top: 10px;
      }

      /* -------- Sidebar panel ---------
         This holds the event editor (title/time/notes) and the list of events for the selected date*/
      .sidebar {
        border: 1px solid #ddd;
        border-radius: 12px;
        padding: 14px;
        min-height: 200px;
      }

      .sidebar h3 {
        margin: 0 0 8px 0;
      }

      /* --------- Selected date text --------
         This text updates when user clicks on a day in the calendar grid */
      .selectedDateText {
        margin: 6px 0 12px;
        font-weight: bold;
      }

      /* ---------- Event editor/form -----------
         Used for both addding a new event AND editing an existing one */
      .eventForm {
        display: grid;
        gap: 8px;
        margin-bottom: 14px;
      }

      .eventForm input,
      .eventForm textarea,
      .eventForm button {
        padding: 8px 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-family: inherit;
      }

      .eventForm textarea {
        resize: vertical;
        min-height: 70px;
      }

      /* ----------- Button row ---------
         Add/Save/Cancel are grouped in one row and wrap if the window is narrow */
      .eventActionsRow {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .eventForm button {
        cursor: pointer;
        background: #fff;
      }

      .eventForm button:hover {
        background: #f3f3f3;
      }

      /* ---------- Event list UI -------
         This shows events for the selected date, inw hich each event gets edit and delete buttons */
      .eventList {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: 8px;
      }

      .eventItem {
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 10px;
        background: #fff;
      }

      .eventItemTitleRow {
        display: flex;
        justify-content: space-between;
        gap: 10px;
        align-items: baseline;
      }

      .eventItemTitle {
        font-weight: bold;
        margin: 0;
      }

      .eventItemTime {
        font-size: 12px;
        color: #555;
        white-space: nowrap;
      }

      .eventItemNotes {
        margin: 8px 0 0;
        color: #333;
        white-space: pre-wrap; /* this helps to preserve line breaks in notes */
      }

      .eventItemBtns {
        display: flex;
        gap: 8px;
        margin-top: 10px;
      }

      .eventItemBtns button {
        padding: 6px 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        background: #fff;
        cursor: pointer;
      }

      .eventItemBtns button:hover {
        background: #f3f3f3;
      }
    </style>
  </head>

  <body>
    <!--
      Header content
      - h2 is the page label
      - close-button to close the focused window
    -->
    <div class="topbar">
      <h2 class="title">Calendar</h2>
      <button id="close-button" type="button">Close Window</button>
    </div>

    <!--
      Navigation back to homepage
      link to index.html inside Electron
    -->
    <div class="links">
      <a href="index.html">Homepage</a>
    </div>

    <!--
      Main page area
      - left side: calendar grid and month/year controls
      - right side: events editor and event list for the selected date
    -->
    <div class="layout">
      <!-- Left side: calendar -->
      <section class="calendarWrap" aria-label="Calendar">
        <!--
          Month/year controls
          calendar.js fills the dropdowns and will re-render the grid whenever these change
        -->
        <div class="controls">
          <button id="prev-month" type="button">◀ Prev</button>

          <label>
            Month:
            <select id="month-select" aria-label="Select month"></select>
          </label>

          <label>
            Year:
            <select id="year-select" aria-label="Select year"></select>
          </label>

          <button id="next-month" type="button">Next ▶</button>
          <button id="today-btn" type="button">Today</button>
        </div>

        <!--
          Day of the week header row
          These are fixed labels and dont change month to month
        -->
        <div class="dow" aria-hidden="true">
          <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
        </div>

        <!--
          Calendar grid container
          calendar.js generates all day cells inside this div
        -->
        <div id="calendar-grid" class="grid"></div>
      </section>

      <!-- Right side: events -->
      <aside class="sidebar" aria-label="Events">
        <!--
          Events section header
          Everything below updates based on which day user clicks
        -->
        <h3>Events</h3>

        <!--
          Selected date label:
          calendar.js updates this when a user clicks a day
        -->
        <div id="selected-date-text" class="selectedDateText">Select a day</div>

        <!--
          Event editor
          - Title and notes are free text
          - Time uses a native time picker 
          - Buttons switch between Add vs Save/Cancel when editing
        -->
        <div class="eventForm" aria-label="Event form">
          <input
            id="event-title"
            type="text"
            placeholder="Title (ex: Exam, Study, Work)"
          />
          <input id="event-time" type="time" />
          <textarea
            id="event-notes"
            placeholder="Notes / tasks (ex: checklist, reminders, etc.)"
          ></textarea>

          <!--
            Event action buttons which:
            - Add creates a new event for the selected date
            - Save updates an existing event (visible when editing specifically)
            - allows users to cancel exits editing mode without saving changes
          -->
          <div class="eventActionsRow">
            <button id="add-event-btn" type="button">Add</button>
            <button id="save-event-btn" type="button" style="display: none">
              Save
            </button>
            <button id="cancel-edit-btn" type="button" style="display: none">
              Cancel
            </button>
          </div>
        </div>

        <!--
          Events list
          calendar.js renders the events for the selected date here
          Each list item includes edit/dlete buttons
        -->
        <div class="listBlock">
          <h4>For selected date</h4>
          <ul id="events-for-date" class="eventList"></ul>
        </div>

        <!--
          Upcoming events list
          calendar.js also shows the next upcoming events across all saved dates
          Allows a user to see whats next without clicking around the calendar
        -->
        <div class="listBlock">
          <h4>Upcoming</h4>
          <ul id="upcoming-events" class="eventList"></ul>
        </div>
      </aside>
    </div>

    <!--
      Handles the "dlose" button and opening child windows (might get rid of tho)
    -->
    <script src="./renderer.js"></script>

    <!--
      This is the calendar + events logic
      Generates grid, handles date clicks, stores events in localStorage
    -->
    <script src="./calendar.js"></script>
  </body>
</html>
